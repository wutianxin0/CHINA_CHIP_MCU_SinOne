C51 COMPILER V9.03   IAP                                                                   04/27/2017 10:28:00 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE IAP
OBJECT MODULE PLACED IN .\output\IAP.obj
COMPILER INVOKED BY: D:\keil\C51\BIN\C51.EXE c\IAP.C BROWSE DEBUG OBJECTEXTEND PRINT(.\lst\IAP.lst) OBJECT(.\output\IAP.
                    -obj)

line level    source

   1          //************************************************************
   2          //  Copyright (c) ÉîÛÚÊÐÈüÔªÎ¢µç×ÓÓÐÏÞ¹«Ë¾
   3          //      ÎÄ¼þÃû³Æ        : IAP.c
   4          //      ×÷Õß            : 
   5          //      Ä£¿é¹¦ÄÜ        :IAP( 256byte EEPROM)µÄÊ¹ÓÃ
   6          //      ¾Ö²¿º¯ÊýÁÐ±í:
   7          //  ×îºó¸üÕýÈÕÆÚ:
   8          //      °æ±¾            :
   9          //      ¸ü¸Ä¼ÇÂ¼        :romÇ°256byte½ûÖ¹²é±í,Òò´ËÔÚ±àÒëµÄÊ±ºò£¬ÉèÖÃkeil->option for Target->BL51 Locate->Code Range:
             -0x100
  10          //*************************************************************
  11          
  12          #include "h\SC91F846_C.h"
  13          #include <intrins.h>
  14          //============================
  15          //Ä£¿é¾Ö²¿±äÁ¿¶¨Òå
  16          //============================
  17          unsigned char WDat,RDat;
  18          unsigned char Addr;
  19          unsigned char code  *POINTER = 0x01F00;                                                         //¶¨ÒåROMÖ¸ÕëµØÖ·£º0x03F00
  20          
  21          //*************************************************************
  22          // º¯ÊýÃû       £ºvoid IAPWrite(void)
  23          // ×÷Õß         £º
  24          // ¹¦ÄÜ         £ºIAPÐ´²Ù×÷
  25          // ²ÎÊý         £ºÎÞ
  26          // ·µ»ØÖµ       £ºÎÞ
  27          // µ÷ÓÃÈ«¾Ö±äÁ¿£ºÎÞ
  28          // ÐÞ¸ÄÈ«¾Ö±äÁ¿£ºÎÞ
  29          // ±¸×¢         £º
  30          //**************************************************************
  31          void IAPWrite(void)
  32          {
  33   1              IAPDAT = WDat;                  //ËÍÊý¾ÝDat1µ½IAPÊý¾Ý¼Ä´æÆ÷
  34   1              IAPADL = Addr;                  //Ð´ÈëµØÖ·ÖµAddr1(0~256)
  35   1              IAPKEY = 0xf0;                  //´ËÖµ¿É¸ù¾ÝÊµ¼Êµ÷Õû;±£Ö¤±¾ÌõÖ¸ÁîÖ´ÐÐºóµ½¶ÔIAPCTL¸³ÖµÇ°Ê±¼ä¼ä¸ôÐ¡ÓÚ240(0xf0)¸öÏµÍ³Ê±ÖÓ£
             -¬·ñÔòIAP¹¦ÄÜ¹Ø±Õ
  36   1              IAPCTL = 0x0a;                  //Ö´ÐÐIAPÐ´Èë²Ù×÷£¬Í¬Ê±CPU 16M Hold 1ms
  37   1              _nop_();
  38   1              _nop_();
  39   1              _nop_();
  40   1              _nop_();
  41   1      }
  42          //*************************************************************
  43          // º¯ÊýÃû       £ºvoid IAPRead(void)
  44          // ×÷Õß         £º
  45          // ¹¦ÄÜ         £ºIAP¶Á²Ù×÷
  46          // ²ÎÊý         £ºÎÞ
  47          // ·µ»ØÖµ       £ºÎÞ
  48          // µ÷ÓÃÈ«¾Ö±äÁ¿£ºÎÞ
  49          // ÐÞ¸ÄÈ«¾Ö±äÁ¿£ºÎÞ
  50          // ±¸×¢         £º
  51          //**************************************************************
  52          void IAPRead(void)
C51 COMPILER V9.03   IAP                                                                   04/27/2017 10:28:00 PAGE 2   

  53          {
  54   1                      RDat = *(POINTER+Addr);
  55   1      }
  56          void main()
  57          {
  58   1              RSTCFG=0x2A;                             //ÇÐ»»RstPinÎªGPIO,lvrÑ¡Ôñ3.5V¸´Î»
  59   1              WDTCR = 0x90;                           //1--1 -- 00    ¿ªWDT,WDTÇå0,WDT=262MSÒç³ö;ÉÕÂ¼Ê±£¬¿ÉCode OptionÑ¡ÔñENWDT
  60   1              while(1)
  61   1              {
  62   2                      IAPWrite();
  63   2                      IAPRead();
  64   2                      WDTCR = 0x90;                           //1--1 -- 00    ¿ªWDT,WDTÇå0,WDT=262MSÒç³ö;ÉÕÂ¼Ê±£¬¿ÉCode OptionÑ¡ÔñENWDT       
  65   2              }
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     50    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
