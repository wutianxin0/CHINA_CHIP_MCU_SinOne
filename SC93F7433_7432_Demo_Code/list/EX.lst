C51 COMPILER V9.03   EX                                                                    06/30/2017 17:39:07 PAGE 1   


C51 COMPILER V9.03, COMPILATION OF MODULE EX
OBJECT MODULE PLACED IN .\output\EX.obj
COMPILER INVOKED BY: D:\keil\C51\BIN\C51.EXE c\EX.c BROWSE DEBUG OBJECTEXTEND PRINT(.\list\EX.lst) OBJECT(.\output\EX.ob
                    -j)

line level    source

   1          //************************************************************
   2          //  Copyright (c) 深圳市赛元微电子有限公司
   3          //      文件名称        : 
   4          //      作者            : 
   5          //      模块功能        : 外部中断的使用
   6          //      局部函数列表:
   7          //  最后更正日期:
   8          //      版本            :
   9          //      更改记录        : rom前256byte禁止查表,因此在编译的时候，设置keil->option for Target->BL51 Locate->Code Range
             -:0x100
  10          //*************************************************************
  11          #include "h\SC92F732X_C.h"
  12          //*************************************************************
  13          // 函数名       ：void IO_init(void)
  14          // 作者         ：
  15          // 功能         ：IO口初始化设置
  16          // 参数         ：无
  17          // 返回值       ：无
  18          // 调用全局变量：无
  19          // 修改全局变量：无
  20          // 备注         ：
  21          //**************************************************************
  22          void IO_init(void)
  23          {       
  24   1              P0CON  = 0x07;                          //中断标志口配置成高阻输入
  25   1              P1CON &= 0xF0;                          //INT0：P13 P12 P11 P10              输入模式，上拉电阻打开      
  26   1              P1PH  |= 0x0F;
  27   1              P1CON &= 0x0F;                          //INT1：P17 P16 P15 14               输入模式，上拉电阻打开     
  28   1              P1PH  |= 0XF0;          
  29   1              P0CON &= 0x0F;                          //INT2：P07 P06 P05 P04  P21 P20         输入模式，上拉电阻打开 
  30   1              P0PH  |= 0XF0;
  31   1              P2CON &= 0xFC;
  32   1              P2PH  |= 0X03;                          
  33   1      }
  34          //*************************************************************
  35          // 函数名       ：void EX_init(void)
  36          // 作者         ：
  37          // 功能         ：外部中断初始化设置
  38          // 参数         ：无
  39          // 返回值       ：无
  40          // 调用全局变量：无
  41          // 修改全局变量：无
  42          // 备注         ：
  43          //**************************************************************
  44          void EX_init(void)
  45          {       
  46   1              INT0F = 0xFF;               //全部下降沿中断使能        
  47   1              INT0R = 0xFF;               //全部上升沿中断使能        
  48   1              INT1F = 0xFF;               //全部下降沿中断使能                
  49   1              INT1R = 0xFF;               //全部上升沿中断使能
  50   1              INT2F = 0xFF;               //全部下降沿中断使能                
  51   1              INT2R = 0xFF;               //全部上升沿中断使能
  52   1              IE=0X05;                                        //EINT0、EINT1置1
  53   1              IE1=0X08;                                       //EINT2置1
C51 COMPILER V9.03   EX                                                                    06/30/2017 17:39:07 PAGE 2   

  54   1      }
  55          //*************************************************************
  56          // 函数名       ：void EX0() interrupt  n
  57          // 作者         ：
  58          // 功能         ：外部中断
  59          // 参数         ：无
  60          // 返回值       ：无
  61          // 调用全局变量：无
  62          // 修改全局变量：无
  63          // 备注         ：硬件自动清除中断标志
  64          //**************************************************************
  65          void EX0() interrupt    0
  66          {
  67   1              P00=~P00;
  68   1      }
  69          void EX1() interrupt    2
  70          {
  71   1              P01=~P01;
  72   1      }
  73          void EX2() interrupt    10
  74          {
  75   1              P02=~P02;
  76   1      }
  77          
  78          //*************************************************************
  79          // 函数名       ：void main()
  80          // 作者         ：
  81          // 功能         ：主函数
  82          // 参数         ：无
  83          // 返回值       ：无
  84          // 调用全局变量：无
  85          // 修改全局变量：无
  86          // 备注         ：
  87          //**************************************************************
  88          void main()
  89          {
  90   1              WDTCON = 0x10;                          //清看门狗，500ms溢出
  91   1              IO_init();
  92   1              EX_init();
  93   1              EA=1;                                           //开总中断
  94   1              while(1)
  95   1              {
  96   2                      WDTCON |= 0x10;                 //清看门狗
  97   2              }
  98   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     78    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
